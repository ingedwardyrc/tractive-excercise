= Pet Tracking Application - Task Specification

== Description

Develop a Java/Kotlin application that calculates the number of pets (dogs and cats)
outside of the power saving zone based on data from different types of trackers.

There are:
* Two types of trackers for cats: small and big
* Three types of trackers for dogs: small, medium, and big

The application should receive data from these trackers through a REST API,
store the data, and allow querying the stored data via the same API.

The application should be implemented using:
* Java 11+ or Kotlin
* Spring Boot 2+
* Include tests
* Support easy replacement of the storage layer

== Requirements

. Develop a REST API that:
* Receives pet tracking data
* Allows querying stored data
* Provides information about the number of pets currently outside the power saving zone, grouped by pet type and tracker type

. Define a `Pet` entity with attributes:
* `petType` (Cat or Dog)
* `trackerType` (Type of tracker)
* `ownerId` (Integer)
* `inZone` (Boolean — true if inside the zone, false if outside)

. Define a `Cat` entity (extends `Pet`) with an additional attribute:
* `lostTracker` (Boolean — true if tracker is lost, false if tracker is attached to cat)

. Use an **in-memory database** to store the received pet count data.
* Design the application to support easy replacement of the storage layer with a persistent database.

. Include **unit and integration tests** to ensure application correctness.
* Use appropriate testing frameworks to cover critical components and scenarios.

. Provide concise documentation describing:
* How to run the application
* How to run tests
* How to interact with the REST API

== Expected Output

* Well-organized and high-quality code applying modern best practices
* Adherence to RESTful principles (resource naming, HTTP methods, status codes)
* Sufficient and effective test coverage
* No UI required
* Example `curl` requests demonstrating API usage

== Time Expectation

We expect you to spend about 2-3 hours on this task. If it takes longer, please submit your progress as is.

== Submission

* Share your source code repository (GitHub, GitLab, etc.) with the implemented solution
* Include instructions for running the application and tests

== Notes

If you have any questions during implementation, feel free to reach out for clarifications or further details.


== Requirements Breakdown = Why is this business case needed?

=== 1. Receives Pet Tracking Data
==== Who would use this endpoint?
** Assumption: This service is going to be used by another service, probably a consumer of events (Kafka or MQTT). It does not make sense to have an IoT device using REST.

==== When is the initial data created?
** Assumption: When a tracking device is assigned/registered to a pet, the tracking data will be initially created.

==== When is the initial data updated?
** Assumption: When a tracking device transmits its location, a consumer will read the data, process it, calculate if a tracking device is outside the power-saving zone, and send the request to store that the device is out of the power-saving zone.

=== 2. Allows Querying Stored Data
==== Who would use this endpoint?
** Assumption: This service will be used by an admin UI or owner UI (mobile or web) to see tracking data for a specific pet. This query will be done by the pet ID or the pet or by the ID of the owner.

==== When will this endpoint be used?
** Assumption: This service will be used by an admin or owner UI to check if a specific pet is out of the energy save zone. Low throughput by an tractive admin API, higher throughput by a owner API.

=== 3. Provides Information About Pets Outside the Power-Saving Zone Grouped by pet type and tracker type.

==== Who would use this endpoint?
** Assumption: Most likely some kind of admin UI to check how many pets are outside every device's power save area.
** I do not know exactly why this API could be needed. In general, if it is for metrics or to create internal alerts, this should be sent to some platform like Datadog. If it is to send specific alerts per device to users or someone in tractive, it is probably a better idea to do it as soon as we notice that the device is out of the energy save zone area. but for the sake of the exercise, I will implement it.

== Possible Architecture Diagram
Created a possible architecture diagram for the Pet Tracking System to understand the requirements better.
image::tractive.drawio.svg[Pet Tracking System Diagram]


** Assumption: It does not consider authorization, even though this is sensitive data due to pet location, which in many cases is equal to the owner's location.
** Assumption: It does not consider the case of multiple trackers per pet
** Assumption: It does not consider the case of multiple pets per tracker
** Assumption: It does not consider the case of multiple owners per pet
** Assumption: It does not consider the case of multiple owners per tracker
** Assumption: No geospatial calculations are needed for this use case, the data about the coordinates of the pet and the energy save zone area is not needed for this use case, it is assumed the calculation of the energy save zone is done by the tracker or a intermediate service and the only data is sent to the service is if the tracker is out of the energy save zone or not.
